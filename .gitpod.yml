# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.

tasks:
  - name: Golang
    init: >
     go get && 
     go build ./... && 
     go test ./...

  # https://github.com/golang/vscode-go/wiki/tools
  - name: Install Go Analysis Tools
    init: |
      go install -v github.com/cweill/gotests/gotests@latest
      go install -v github.com/fatih/gomodifytags@latest
      go install -v github.com/go-delve/delve/cmd/dlv@latest
      go install -v github.com/haya14busa/goplay/cmd/goplay@latest
      go install -v github.com/josharian/impl@latest
      go install -v github.com/ramya-rao-a/go-outline@latest
      go install -v golang.org/x/tools/gopls@latest
      go install -v honnef.co/go/tools/cmd/staticcheck@latest

  - name: Open Tutorial Directory   
    command: >
      gp ports await 23000 &&
      if [ -n "$tutorial" ]; then cd ./tutorials && code -r . && clear; fi
# there's a bug within gitpod's fork of VS code web that doesn't allow you to open both 
# a directory and file from the command line at the same time.
# See https://github.com/gitpod-io/gitpod/issues/13107

image:
  file: .gitpod.Dockerfile

github:
  prebuilds:
    master: true
    branches: true
    pullRequests: true
    pullRequestsFromForks: true
    addCheck: false
    addComment: true
    addBadge: false

vscode:
  extensions:
    - golang.go
